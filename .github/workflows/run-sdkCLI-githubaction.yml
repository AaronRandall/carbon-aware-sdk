name: using CarboneAware Github action in sample pipeline

on:
  push:
    paths:
      - 'src/dotnet/**'
      - '.github/workflows/**'
  pull_request:
    branches: [ dev, main ]
    paths:
      - 'src/dotnet/**'
      - 'entrypoint.sh'
      - 'action.yml'


jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - name: CarboneAWare metrics
      id: carboneaware-metrics
      uses: Green-Software-Foundation/carbon-aware-sdk@sdkCLI-githubaction  # here "sdkCLI-githubaction" is the name of the branch
      with:
        location: westeurope,francecentral,westus
        #config: /carbon-aware.json
        #fromTime:
        #toTime:
        
    - name: Deplpoy Workload to Selected Region
      run: echo deploying ML Training Job to Region "${{ steps.carboneaware-metrics.outputs.LowestEmissionsLocation}}"
      
    - name: Schedule Jobs at Proposed Time with Low Carbon Emissions
      run: echo Scheduling ML Training Job at Time "${{ steps.carboneaware-metrics.outputs.LowestEmissionsTime}}"
